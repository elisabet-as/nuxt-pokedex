import { Schema as NormalizrSchema } from 'normalizr';
import Schema from '../../schema/Schema';
import { Record, Records, NormalizedData, Collection } from '../../data';
import Model from '../../model/Model';
import Query from '../../query/Query';
import Constraint from '../../query/contracts/RelationshipConstraint';
import Attribute from '../Attribute';
export default abstract class Relation extends Attribute {
    /**
     * Define the normalizr schema for the relationship.
     */
    abstract define(schema: Schema): NormalizrSchema;
    /**
     * Attach the relational key to the given data. Basically, this method
     * should attach any missing foreign keys to the normalized data.
     */
    abstract attach(key: any, record: Record, data: NormalizedData): void;
    /**
     * Load relationship records.
     */
    abstract load(query: Query, collection: Collection, name: string, constraints: Constraint[]): void;
    /**
     * Get relation query instance with constraint attached.
     */
    protected getRelation(query: Query, name: string, constraints: Constraint[]): Query;
    /**
     * Get specified keys from the given collection.
     */
    protected getKeys(collection: Collection, key: string): string[];
    /**
     * Create a new indexed map for the single relation by specified key.
     */
    mapSingleRelations(collection: Record[], key: string): Records;
    /**
     * Create a new indexed map for the many relation by specified key.
     */
    mapManyRelations(collection: Record[], key: string): Records;
    /**
     * Check if the given value is a single relation, which is the Object.
     */
    isOneRelation(record: any): boolean;
    /**
     * Check if the given value is a single relation, which is the Object.
     */
    isManyRelation(records: any): boolean;
    /**
     * Convert given records to the collection.
     */
    makeManyRelation(records: any, model: typeof Model): Collection;
}
